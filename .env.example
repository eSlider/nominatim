# Nominatim Docker — environment configuration
# Copy to .env and adjust as needed: cp .env.example .env

# ── Planet data source ────────────────────────────────────────────────
# Download URL (used by bin/download-planet.sh, not by container)
PLANET_PBF_URL=https://ftp5.gwdg.de/pub/misc/openstreetmap/planet.openstreetmap.org/pbf/planet-latest.osm.pbf

# Path inside the container (bind-mounted from ./var/osm/)
PBF_PATH=/nominatim/data/planet-latest.osm.pbf

# ── Replication / updates ────────────────────────────────────────────
REPLICATION_URL=https://ftp5.gwdg.de/pub/misc/openstreetmap/planet.openstreetmap.org/replication/day/
REPLICATION_UPDATE_INTERVAL=86400
REPLICATION_RECHECK_INTERVAL=900

# Set to "continuous" after initial import completes
UPDATE_MODE=none

# ── Import options ────────────────────────────────────────────────────
IMPORT_STYLE=full
IMPORT_WIKIPEDIA=true
FREEZE=false
REVERSE_ONLY=false

# ── Hardware tuning (i7-12700H · 64 GB RAM · 20 threads) ─────────────
# THREADS maps to osm2pgsql --number-processes (set to `nproc` for all CPUs)
THREADS=20

# PostgreSQL — tuned for 64 GB RAM
POSTGRES_SHARED_BUFFERS=16GB
POSTGRES_EFFECTIVE_CACHE_SIZE=48GB
POSTGRES_MAINTENANCE_WORK_MEM=10GB
POSTGRES_AUTOVACUUM_WORK_MEM=2GB
POSTGRES_WORK_MEM=50MB
POSTGRES_SYNCHRONOUS_COMMIT=off
POSTGRES_MAX_WAL_SIZE=1GB
POSTGRES_CHECKPOINT_TIMEOUT=10min
POSTGRES_CHECKPOINT_COMPLETION_TARGET=0.9

# ── Security ──────────────────────────────────────────────────────────
NOMINATIM_PASSWORD=changeme

# ── API ───────────────────────────────────────────────────────────────
NOMINATIM_PORT=8080
